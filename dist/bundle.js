(()=>{"use strict";window._confirmationBoosterData={},window._confirmationBoosterData.emailSubmitted=!1,window._confirmationBoosterData.subscriberEmailAddress=null,window._confirmationBoosterData.emailInputSelector=window._confirmationBoosterSettings.emailInputSelector,window._confirmationBoosterData.submitButtonSelector=window._confirmationBoosterSettings.submitButtonSelector,window._confirmationBoosterData.successElementSelector=window._confirmationBoosterSettings.successElementSelector,window._confirmationBoosterData.senderEmailAddress=window._confirmationBoosterSettings.senderEmailAddress,window._confirmationBoosterData.imagesPath=window._confirmationBoosterSettings.imagesPath;const o=[{name:"Gmail",domains:["gmail.com"],mxRecordsSubstrings:["google.com"],iconFilename:"gmail.png",url:()=>`https://mail.google.com/mail/u/${window._confirmationBoosterData.subscriberEmailAddress}/#search/from:${window._confirmationBoosterData.senderEmailAddress}+in:anywhere+newer_than:1d`},{name:"Outlook",domains:["outlook.com","hotmail.com","live.com"],mxRecordsSubstrings:["outlook.com"],url:()=>"https://outlook.live.com"}];function t(o){return`\n    <a href="${o.url}" target="_blank"\n    style="display: flex; align-items: center; border-radius: 8px; border: #6b7280 1px solid; padding: 8px 32px; font-size: 16px; font-weight: 600; text-decoration: none; color: #111827;">\n    <img alt='' src="${window._confirmationBoosterData.imagesPath}${o.iconFilename}" height="20" style="height: 20px;" />\n    <div style="margin: 0 0 0 8px; ">Open ${o.name}</div>\n  </a>\n  `}async function e(t){const e=t.split("@")[1];let i=o.find((o=>o.domains.includes(e)));if(!i){const t=await n(e);if(null==t)return null;i=o.find((o=>t.some((t=>o.mxRecordsSubstrings.some((o=>t.data.includes(o)))))))}return i}async function n(o){let t=await fetch(`https://cloudflare-dns.com/dns-query?name=${o}&type=MX`,{headers:{accept:"application/dns-json"}});return(await t.json()).Answer}function i(){const o=navigator.platform.toLowerCase();return/(macintosh|macintel|macppc|mac68k|macos)/i.test(o)?"macos":/(iphone|ipad|ipod)/i.test(o)?"ios":/(win32|win64|windows|wince)/i.test(o)?"windows":/(linux)/i.test(o)?"linux":/(android)/i.test(o)?"android":void 0}function r(){const o=window._confirmationBoosterData.emailInput.value;window._confirmationBoosterData.emailSubmitted=!0,window._confirmationBoosterData.subscriberEmailAddress=o}!function(){const o=document.querySelector(window._confirmationBoosterData.emailInputSelector);o?(window._confirmationBoosterData.emailInput=o,console.log("FOUND email input OUTSIDE observer")):new MutationObserver(((o,t)=>{!window._confirmationBoosterData.emailSubmitted&&document.querySelector(window._confirmationBoosterData.emailInputSelector)&&(console.log("FOUND email input in observer"),window._confirmationBoosterData.emailInput=document.querySelector(window._confirmationBoosterData.emailInputSelector),t.disconnect())})).observe(document.body,{childList:!0,subtree:!0})}(),function(){const o=document.querySelector(window._confirmationBoosterData.submitButtonSelector);o?(console.log("FOUND submit button OUTSIDE observer"),window._confirmationBoosterData.submitButton=o,window._confirmationBoosterData.submitButton.addEventListener("click",r)):new MutationObserver(((o,t)=>{document.querySelector(window._confirmationBoosterData.submitButtonSelector)&&(console.log("FOUND submit button INSIDE observer"),window._confirmationBoosterData.submitButton=document.querySelector(window._confirmationBoosterData.submitButtonSelector),window._confirmationBoosterData.submitButton.addEventListener("click",r),t.disconnect())})).observe(document.body,{childList:!0,subtree:!0})}(),new MutationObserver(((o,n)=>{window._confirmationBoosterData.emailSubmitted&&document.querySelector(window._confirmationBoosterData.successElementSelector)&&(console.log("FOUND Success element in observer"),e(window._confirmationBoosterData.subscriberEmailAddress).then((o=>{document.getElementById("output").innerHTML=(o=>{let e="";return o.provider&&(e+=t({url:o.provider.url(),name:o.provider.name,iconFilename:o.provider.iconFilename})),"macos"!==o.platform&&"ios"!==o.platform||(e+=t({url:"message://",name:"Apple Mail",iconFilename:"apple.png"})),e})({provider:o,platform:i()})})),n.disconnect())})).observe(document.body,{childList:!0,subtree:!0}),function(){const o=document.querySelector(window._confirmationBoosterData.submitButtonSelector);o&&o.addEventListener("click",(()=>{document.querySelector("#form")&&(document.querySelector("#form").remove(),function(){const o=document.createElement("div");o.classList.add("formkit-alert"),o.classList.add("formkit-alert-success"),o.innerHTML="Success",document.body.appendChild(o)}())}))}(),window.checkEmailProvider=e,window.fetchMXRecords=n,window.getPlatform=i})();